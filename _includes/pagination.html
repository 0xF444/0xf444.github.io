{%- assign list_pages = site.pages | sort:"date" | reverse -%}

<div class="category_name">
    {%- assign page_link = "/" -%}
    {% if page_level == 1 %}
        <p></p>
        <h3 id="category">@ll_posts</h3>
    {% else %}
        <p>
            {%- assign search_tree = page.path | remove: "/index.md" | split: "/" -%}
            {%- for sub_tree in search_tree -%}
                {% if forloop.first %}
                    <a href="/">Home</a>
                    >
                {% elsif forloop.last %}
                    {{ sub_tree }}
                {% else %}
                    {%- assign page_link = page_link | append: sub_tree | append: "/" -%}
                    <a href="{{ page_link }}">{{ sub_tree }}</a>
                    >
                {% endif %}
            {%- endfor -%}
        </p>
        <h3 id="category">{{ page.title }}</h3>
    {% endif %}
</div>
<div id="category_list">
    <ul class="paginated-list" data-current-page="1" aria-live="polite">
    {%- for sub_page in list_pages -%}
        {%- assign page_url = page.url | remove: 'index.html' -%}
        {%- assign checkArray = sub_page.url | split:page_url -%} <!-- check whether the post belongs to the parent category -->
        {% if checkArray[0] == "" and sub_page.type == "post" and is_post[0] != sub_page.url %}
            <li class="paginated-item">
                <div id="article_content">
                    <div class="thumbnail_zone">
                        {% if sub_page.thumbnail != nil %}
                            <a href="{{ sub_page.url }}" class="thumbnail_post" aria-label="thumbnail_post" style="background-image:url('{{ sub_page.thumbnail }}') !important"></a>
                        {% else %}
                            <a href="{{ sub_page.url }}" class="thumbnail_post empty" aria-label="thumbnail_post" style="background-image:url('/assets/img/thumbnail/empty.jpg') !important"></a>
                        {% endif %}
                    </div>

                    <div class="box_contents">
                        <a href="{{ sub_page.url }}" class="title_post">{{ sub_page.title }}</a>
                        <a href="{{ sub_page.url }}" class="txt_post">
                            {{ sub_page.content | markdownify | strip_html }}
                        </a>
                        <div class="info_post">
                            {%- assign sub_page_tree = sub_page.path | split: "/" -%}
                            {% if sub_page_tree.size > 2 %}
                                <a href="{{ '/' | append: sub_page_tree[1] }}" class="category">{{ sub_page_tree[1] }}</a>
                            {% else %}
                                <span class="category">None</span>
                            {% endif %}
                            <span class="date">Â· {{ sub_page.date | date: "%Y-%m-%d" }}</span>
                        </div>
                    </div>
                </div>
            </li>
        {% endif %}
    {%- endfor -%}
    </ul>
</div>
<div class="pagination">
    <nav class="pagination-container">
        <button class="pagination-button" id="prev-button" aria-label="Previous page" title="Previous page">
            &lt;
        </button>
    
        <div id="pagination-numbers"></div>
      
        <button class="pagination-button" id="next-button" aria-label="Next page" title="Next page">
            &gt;
        </button>
    </nav>
</div>